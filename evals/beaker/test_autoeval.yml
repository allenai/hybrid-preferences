version: v2
budget: ai2/oe-adapt
description: "Get features using datamodel approach"
tasks:
  - name: test-convert
    image:
      beaker: ljm/easylm-convert
    command: ["python", "convert_to_hf.py"]
    arguments:
      - --gcs_bucket
      - ljm-dev
      - --output_dir
      - --gcs_dir_path
      - human-preferences/rm_checkpoints/helpsteer2/tulu2_13b_rm_human_datamodel_counts_7000_ID__12d300927a0d4eb08226bf126065bec5__SWAPS_2978
      - --prefix
      - helpsteer2-counts
      - --batch_size
      - 1
      - --is_reward_model
    resources:
      gpuCount: 1
    context:
      priority: normal
      preemptible: true
    constraints:
      cluster:
        - ai2/allennlp-cirrascale
        - ai2/jupiter-cirrascale-2
    envVars:
      - name: OPENAI_API_KEY
        secret: OPENAI_API_KEY
      - name: GOOGLE_SERVICE_ACCOUNT
        secret: GOOGLE_SERVICE_ACCOUNT
      - name: BEAKER_TOKEN
        secret: BEAKER_TOKEN
      - name: TOKENIZERS_PARALLELISM
        value: "false"
